<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap4.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <style>
    /* general */
    body {
      margin: 3em;
    }
    .tab-content {
      margin-top: 2em;
    }

    table th {
      width: auto !important;
    }
    code {
      line-height: 1.5;
    }

    .location {
      font-size:.8em;font-family:monospace;overflow-wrap:break-word
    }

    .snippet {
      font-size:.8em;
    }
    .snippet code {
      display: block;
      font-size:1em;
      font-family:monospace;overflow-wrap:break-word;
      margin-top: 1em;
    }

    .tab-pane{
      margin-top: 1.5em;
      margin-left: 1em;
      margin-bottom: 2em; /* useful for javascriptless (tab-less) linear display mode */
    }

    .pagenav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
    }

    .sectionnav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
      margin-bottom: 2em;
    }
    /* metadata */
    #metadata-table tr td:first-child {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name:after {
      content: ", ";
    }
    .metadata-name:last-child::after {
      content: "";
    }
    #a11y-metadata {
      margin-top: 1em;
    }
    #metadata-table_wrapper {
      padding-left: 0 !important;
    }

    /* TOC outline */
    .toc-h1:before,.toc-h2:before,.toc-h3:before,.toc-h4:before,.toc-h5:before,.toc-h6:before,.toc-missing{
      display:inline-block;
      height:1.5em;
      padding:0 .4em;
      background-color:#449d44;
      border-radius:4px;
      color:#fff;
      font-size:.8em;
      font-family:monospace;
      margin:0 .5em 0 0;
    }

    .toc-h1:before{content:'h1'}
    .toc-h2:before{content:'h2'}
    .toc-h3:before{content:'h3'}
    .toc-h4:before{content:'h4'}
    .toc-h5:before{content:'h5'}
    .toc-h6:before{content:'h6'}
    .toc-missing{font-family:inherit;background-color:#c9302c}

    #toc-outline ol, #html-outline ol {
      list-style: disc;
    }

    /* images */
    #images td {
      text-align: center;
      font-family: serif;
    }
    #images td.image{
      /*text-align:center;*/
      padding:.2em;
    }
    #images td.missing{
      /*text-align:center;*/
      color:#888;
      font-style:italic;
    }
    #images td.alt {border:1px solid #ddd}
    #images td.alt.missing{background-color:#f2dede}
    #images td.alt,td.image.presentation+td.alt.missing{background-color:#dff0d8}
    #images img {
      max-height: 300px;
      max-width: 300px;
    }

    /* violations  */
    #violations-summary-stats-table {
      width: 30%;
    }
    #violations ul:not(.pagination) {
      list-style-type: circle;
    }

    #filters select {
      margin-left: 10px;
      margin-right: 30px;
    }

    .filter-label {
      text-transform: capitalize;
    }

    .engine {
      font-style: italic;
    }
    .engine:before{content: '(via '}
    .engine:after{content: ')'}
    .css:before{content: 'CSS: '}
    .cfi:before{content: 'CFI: '}

    /* make the list and KB link the same padding */
    td.details p{
      padding-left: 40px;
    }

    span.critical, span.serious, span.moderate, span.minor {
      display:inline-block;
      height:1.5em;
      padding: .4em;
      border-radius:4px;
      font-family:monospace;
      font-weight: bold;
    }

    span.critical {
      background-color: #9c2b2e;
      color: #fff;
    }
    span.serious {
      background-color: #ffa500;
      color: #000;
    }
    span.moderate {
      background-color: #7b5000;
      color: #fff;
    }
    span.minor {
      background-color: #ffff7f;
      color: #000;
    }
    #message {
      margin-left: 1em;
    }
    #violations-table_wrapper {
      padding-left: 0 !important;
    }

  </style>

  <title>EPUB Accessibility Report by DAISY Ace</title>
</head>
<body>

  <header>
    <noscript>
      <div class="alert alert-info">Please enable javascript for best performance.</div>
    </noscript>

    <h1>EPUB Accessibility Report</h1>
    <p class="font-italic">Generated by DAISY Ace (1.1.1) on 10/11/2020, 2:27:57 AM</p>
    <p><span class="font-weight-bold">Title:</span> Cutting The Cable</p>
  </header>

  <nav>
    <ul id="navlist" role="tablist">
      <li class="nav-item"><a class="nav-link active" data-toggle="list" href="#violations" role="tab" aria-controls="violations" id="nav-violations">Violations</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#metadata" role="tab" aria-controls="metadata" id="nav-metadata">Metadata</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#outlines" role="tab" aria-controls="outlines" id="nav-outlines">Outlines</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#images" role="tab" aria-controls="images" id="nav-images">Images</a></li>
    </ul>
  </nav>


  <!-- Tab panes -->
  <div class="tab-content">

    <!-- VIOLATIONS TAB -->
    <div id="violations" role="tabpanel">
      <h2>Violations</h2>
      <p class="sectionnav">Go to: <a href="#summary_of_violations">Summary of violations</a> | <a href="#all-violations">All violations</a> </p>

      <h3 id="summary_of_violations">Summary of violations</h3>
      <table id="violations-summary-stats-table" class="table table-striped">
        <caption>Violation count, by ruleset and severity.</caption>
        <thead class="thead-inverse">
          <tr>
            <th></th>
            <th scope="col">Critical</th>
            <th scope="col">Serious</th>
            <th scope="col">Moderate</th>
            <th scope="col">Minor</th>
            <th scope="col">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">WCAG 2.0 A</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">WCAG 2.0 AA</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">EPUB</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Best Practice</th>
            <td>0</td><td>0</td><td>1</td><td>0</td><td>1</td>
          </tr>
          <tr>
            <th scope="row">Other</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Total</th>
            <td>0</td><td>0</td><td>1</td><td>0</td><td>1</td>
          </tr>
        </tbody>
      </table>

      <h3 id="all-violations">All violations</h3>

      <div id="filters" class="d-none py-4">
        <span class="filter-label">Impact</span>
        <select name="impact" aria-label="impact">
          <option value="all" selected>All</option>
          <option value='moderate'>Moderate</option>
        </select>
        <span class="filter-label">Ruleset</span>
        <select name="ruleset" aria-label="ruleset">
          <option value="all" selected>All</option>
          <option value='best-practice'>Best Practice</option>
        </select>
        <span class="filter-label">Rule</span>
        <select name="rule" aria-label="rule">
          <option value="all" selected>All</option>
          <option value='heading-order'>heading-order</option>
        </select>
        <span class="filter-label">File</span>
        <select name="file" aria-label="file">
          <option value="all" selected>All</option>
          <option value='radio.xhtml'>radio.xhtml</option>
        </select>
        <a href="#" onclick="resetFilters()" class="ml-4">Reset filters</a>
      </div>

      <table id="violations-table" class="table table-bordered">
        <caption>Violations in the EPUB, with references to severity, guidelines and specific location of problem.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Impact</th>
            <th>Ruleset</th>
            <th>Rule</th>
            <th>Location</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
        <td><span class='moderate'>Moderate</span></td>
        <td><span class='ruleset'>Best Practice</span></td>
        <td>heading-order<br/><br/><span class='engine'>aXe</span></td>
        <td><em>"The Spirit of Radio"</em><br/><br/><code class='location'>radio.xhtml#epubcfi(/4/2/10/2[disclaimer.label])</code><br/><br/><div class='snippet'>Snippet:<code>&lt;h3 xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;disclaimer.label&quot;&gt;Disclaimer&lt;/h3&gt;</code></div></td><td class='details'>
        <ul><li>Heading order invalid</li></ul>
        <p><a href='http://kb.daisy.org/publishing/docs/html/headings.html' target='_blank'>Learn more about: Headings</a></p>
        </td></tr>
        </tbody>
      </table>

      <p class="pagenav">Go to: <a href="#violations">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- METADATA TAB -->
    <div id="metadata" role="tabpanel">
      <h2>Metadata</h2>

      <p class="sectionnav">Go to: <a href="#all-metadata">All Metadata</a> | <a href="#a11y-metadata">Accessibility Metadata</a> </p>

      <h3 id="all-metadata">All Metadata</h3>
      <table id="metadata-table" class="table table-bordered">
        <caption>Publication metadata.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>dc:title</td>
            <td>Cutting The Cable</td>
          </tr>
          <tr>
            <td>dc:description</td>
            <td>A guide to switching to Over The Air digital broadcasts</td>
          </tr>
          <tr>
            <td>dc:type</td>
            <td>Home Improvement</td>
          </tr>
          <tr>
            <td>dc:language</td>
            <td>en-US</td>
          </tr>
          <tr>
            <td>dc:publisher</td>
            <td>Pipfrosch Press</td>
          </tr>
          <tr>
            <td>dc:date</td>
            <td>2021-06-30</td>
          </tr>
          <tr>
            <td>dc:creator</td>
            <td>Michael A. Peters</td>
          </tr>
          <tr>
            <td>dc:identifier</td>
            <td>5581b6ed-d616-414f-854b-5a9f2dc1d15e</td>
          </tr>
          <tr>
            <td>schema:accessibilitySummary</td>
            <td>This publication attempts to conform to WCAG 2.0 Level AA. Validation by an accessibility expert has not yet been done.</td>
          </tr>
          <tr>
            <td>schema:accessMode</td>
            <td>textual,visual</td>
          </tr>
          <tr>
            <td>schema:accessModeSufficient</td>
            <td>textual,visual,textual</td>
          </tr>
          <tr>
            <td>schema:accessibilityFeature</td>
            <td>structuralNavigation</td>
          </tr>
          <tr>
            <td>schema:accessibilityHazard</td>
            <td>noFlashingHazard,noSoundHazard,noMotionSimulationHazard</td>
          </tr>
          <tr>
            <td>dcterms:modified</td>
            <td>2020-10-11T09:27:53Z</td>
          </tr>
          
        </tbody>
      </table>

      <h3 id="a11y-metadata">Accessibility Metadata</h3>

        <p>The following accessibility metadata is present:
          <span class="metadata-name">schema:accessMode</span>
          <span class="metadata-name">schema:accessibilityFeature</span>
          <span class="metadata-name">schema:accessibilityHazard</span>
          <span class="metadata-name">schema:accessibilitySummary</span>
          <span class="metadata-name">schema:accessModeSufficient</span>
        </p>

        <p>The following accessibility metadata is missing:
          <span class="metadata-name">schema:accessibilityAPI</span>
          <span class="metadata-name">schema:accessibilityControl</span>
          <span class="metadata-name">a11y:certifiedBy</span>
          <span class="metadata-name">dcterms:conformsTo</span>
        .
        </p>
      <p class="pagenav">Go to: <a href="#metadata">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- OUTLINES TAB -->
    <div id="outlines" role="tabpanel">
      <h2>Outlines</h2>
      <p class="sectionnav">Go to: <a href="#toc-outline">TOC Outline</a> | <a href="#headings-outline">Headings Outline</a> | <a href="#html-outline">HTML Outline</a> </p>

      <div class="row">

        <div class="col-sm" id="toc-outline">
          <h3>TOC Outline</h3>
          <ol xmlns="http://www.w3.org/1999/xhtml">
    <li>Antenna Selection</li>
    <li>Bonding, Earthing, and Grounding</li>
    <li>The Spirit of Radio</li>
    <li>Author‘s Home</li>
  </ol>
        </div>

        <div class="col-sm" id="headings-outline">
          <h3>Headings Outline</h3>
          <ul><li><span class="toc-h1">Antenna Selection</span><ul><li><span class="toc-h2">Install Location</span><li><span class="toc-h2">Frequency Bands and Antenna Types</span><ul><li><span class="toc-h3">Loop Antenna</span></li></ul></li><li><span class="toc-h2">Ultra High Frequency Television</span><li><span class="toc-h2">Very High Frequency Television</span><li><span class="toc-h2">The Spirit of Radio</span><li><span class="toc-h2">Distance and Direction</span><li><span class="toc-h2">Signal Combiner</span><li><span class="toc-h2">Antenna Vendors</span></li></ul></li><li><span class="toc-h1">Bonding, Earthing, and Grounding</span><ul><li><span class="toc-h2">Bonding</span><li><span class="toc-h2">Earthing</span><li><span class="toc-h2">Grounding and Bonding to Ground</span><li><span class="toc-h2">Ground Loop</span><li><span class="toc-h2">Summary</span><li><span class="toc-h2">Notes</span></li></ul></li><li><span class="toc-h1">The Spirit of Radio</span><ul><li><span class="toc-missing">Missing heading: h2</span><ul><li><span class="toc-h3">Disclaimer</span></li></ul></li><li><span class="toc-h2">Antenna Selection</span><li><span class="toc-h2">Antenna Location</span><li><span class="toc-h2">Splitting the Signal</span><ul><li><span class="toc-h3">AM Compatible Inline Amplifier</span></li></ul></li><li><span class="toc-h2">Coaxial Cable</span><li><span class="toc-h2">Receiver Connection</span><ul><li><span class="toc-h3">Seperator Kits</span></li></ul></li><li><span class="toc-h2">SiriusXM Expansion</span><li><span class="toc-h2">Sangean HDT-20 AM/FM/HD Tuner</span><li><span class="toc-h2">Test Environment</span><li><span class="toc-h2">The Tests</span></li></ul></li><li><span class="toc-h1">Author’s Home</span><ul><li><span class="toc-h2">Brief Description of Our Home</span><li><span class="toc-h2">Over The Air Reception Plan</span><li><span class="toc-h2">Phase 1: West Wing</span><li><span class="toc-h2">Phase 2: Amplifier Power</span><li><span class="toc-h2">Phase 3: East Wing</span><li><span class="toc-h2">Phase 4: Entertainment Center Rebuild</span><li><span class="toc-h2">Phase 5: Broadcast Radio Antenna</span><li><span class="toc-h2">Hypothetical Updates</span><li><span class="toc-h2">Coaxial Wiring Diagram for Broadcast Radio Setup</span></li></ul></li></ul>
        </div>

        <div class="col-sm" id="html-outline">
          <h3>HTML Outline</h3>
          <ol><li><ol><li><i>Untitled BODY</i><ol><li>Antenna Selection<ol><li>Install Location</li><li>Frequency Bands and Antenna Types<ol><li>Loop Antenna</li></ol></li><li>Ultra High Frequency Television</li><li>Very High Frequency Television</li><li>The Spirit of Radio</li><li>Distance and Direction</li><li>Signal Combiner</li><li>Antenna Vendors</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Bonding, Earthing, and Grounding<ol><li>Bonding</li><li>Earthing</li><li>Grounding and Bonding to Ground</li><li>Ground Loop</li><li>Summary</li><li>Notes</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>The Spirit of Radio<ol><li>Disclaimer</li><li>Antenna Selection</li><li>Antenna Location</li><li>Splitting the Signal<ol><li>AM Compatible Inline Amplifier</li></ol></li><li>Coaxial Cable</li><li>Receiver Connection<ol><li>Seperator Kits</li></ol></li><li>SiriusXM Expansion</li><li>Sangean HDT-20 AM/FM/HD Tuner</li><li>Test Environment</li><li>The Tests</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Author’s Home<ol><li>Brief Description of Our Home</li><li>Over The Air Reception Plan</li><li>Phase 1: West Wing</li><li>Phase 2: Amplifier Power</li><li>Phase 3: East Wing</li><li>Phase 4: Entertainment Center Rebuild</li><li>Phase 5: Broadcast Radio Antenna</li><li>Hypothetical Updates</li><li>Coaxial Wiring Diagram for Broadcast Radio Setup</li></ol></li></ol></li></ol></li></ol>
      </div>
    </div>
    <p class="pagenav">Go to: <a href="#outlines">Top of section</a> | <a href="#navlist">Page navigation</a></p>
  </div>

  <!-- IMAGES TAB -->
  <div id="images" role="tabpanel">
      <h2>Images</h2>
        <table  id="image-table" class="table table-striped table-bordered">
          <caption>Images in the EPUB, with their description</caption>
          <thead class="thead-inverse">
             <tr>
                <th>Image</th>
                <th><code>alt</code>
                </th>
                <th><code>aria-describedby</code>
                </th>
                <th><code>figcaption</code></th>
                <th>Location</th>
                <th>Role</th>
             </tr>
          </thead>
          <tbody>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/images/stereo75.jpg">
                      <img src = "data/EPUB/images/stereo75.jpg"/>
                    </a>
                  </td>

                    <td>Photo of ports on back of stereo receiver</td>

                    <td class="missing">N/A</td>

                    <td>The back of my Yamaha R-S201 receiver showing a 75Ω coaxial female F-connector antenna jack</td>

                  <td class="location">antenna_selection.xhtml#epubcfi(/4/2/14[radio]/8/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/images/transmap.jpg">
                      <img src = "data/EPUB/images/transmap.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td>Generated map showing broadcast transmitter locations centered around the city of Brentwood in the San Francisco Bay Area.</td>

                    <td>Generated map showing broadcast transmitter locations centered around the city of Brentwood in the San Francisco Bay Area.</td>

                  <td class="location">antenna_selection.xhtml#epubcfi(/4/2/16[clusters]/12[transmap]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/images/bonding.jpg">
                      <img src = "data/EPUB/images/bonding.jpg"/>
                    </a>
                  </td>

                    <td>Photograph of two metal water pipes entering a wall. Attached to each pipe is a ground clamp. An unshielded heavy wire runs between the ground clamps.</td>

                    <td class="missing">N/A</td>

                    <td>Two pipes bonded together with a solid core wire.</td>

                  <td class="location">bond_earth_ground.xhtml#epubcfi(/4/2/16[bonding]/6[figure.bonding]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/images/water_main.jpg">
                      <img src = "data/EPUB/images/water_main.jpg"/>
                    </a>
                  </td>

                    <td>Photograph of the outside of a house showing the main electrical box, the water main, and the natural gas meter.</td>

                    <td class="missing">N/A</td>

                    <td>This house was built in 2001 and either does not have an actual ground rod or the ground rod is completely burried and is not accessible. However since the water main is within five feet of the main electrical box, the water main could be used as a ground rod. Paint would have to be scraped off before attaching the clamps for the earthing wires from an antenna.</td>

                  <td class="location">bond_earth_ground.xhtml#epubcfi(/4/2/26[notes]/8[figure.watermain]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/images/stereo75.jpg">
                      <img src = "data/EPUB/images/stereo75.jpg"/>
                    </a>
                  </td>

                    <td>Photo of ports on back of stereo receiver</td>

                    <td class="missing">N/A</td>

                    <td>The back of my Yamaha R-S201 receiver showing a 75Ω coaxial female F-connector antenna jack for FM and a two push-wire connectors for AM.</td>

                  <td class="location">radio.xhtml#epubcfi(/4/2/16[figure.stereo]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
          </tbody>
        </table>
      <p class="pagenav">Go to: <a href="#images">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

  </div> <!-- end div for tabs' contents -->


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>

  <script type="text/javascript">

    // https://datatables.net/reference/option/language
    // https://datatables.net/examples/basic_init/language.html
    // https://datatables.net/manual/i18n
    const dataTableInit = {
        "language": {
            "decimal":        "",
            "emptyTable":     'No data available in table',
            "info":           'Showing: _START_ - _END_ / _TOTAL_',
            "infoEmpty":      'Showing: 0 - 0 / 0',
            "infoFiltered":   '(filtered from _MAX_ total entries)',
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     'Display _MENU_ records per page',
            "loadingRecords": 'Loading...',
            "processing":     'Processing...',
            "search":         'Search:',
            "zeroRecords":    'No matching records found',
            "paginate": {
                "first":      'First',
                "last":       'Last',
                "next":       'Next',
                "previous":   'Previous'
            },
            "aria": {
                "sortAscending":  ': activate to sort column ascending',
                "sortDescending": ': activate to sort column descending'
            }
        }
    };

  // keep a flat list of the violations in memory for table filtering
  var violations = [{"file":"radio.xhtml","fileTitle":"The Spirit of Radio","engine":"aXe","kburl":"http://kb.daisy.org/publishing/docs/html/headings.html","kbtitle":"Headings","rule":"heading-order","desc":"Heading order invalid","pointer":{"cfi":["/4/2/10/2[disclaimer.label]"],"css":["#disclaimer\\.label"]},"impact":"moderate","location":"radio.xhtml#epubcfi(/4/2/10/2[disclaimer.label])","rulesetTags":["cat.semantics","best-practice"],"applicableRulesetTag":"best-practice","html":"&lt;h3 xmlns=&quot;http://www.w3.org/1999/xhtml&quot; id=&quot;disclaimer.label&quot;&gt;Disclaimer&lt;/h3&gt;"}];

  // update the contents of the table to reflec the filtering
  function updateTableContents(violationSubset) {
    // anything else is 'other'
    var rulesetTagLabels = {
      'wcag2a': 'WCAG 2.0 A',
      'wcag2aa': 'WCAG 2.0 AA',
      'EPUB': 'EPUB',
      'best-practice': 'Best Practice',
      'other': 'Other'
    };

    $('#violations-table').dataTable().fnDestroy();
    $("#message").remove();
    if (violationSubset.length == 0) {
      $("<p id='message'>No matching violations found.</p>").insertBefore("#violations .pagenav");
      $("#violations-table").hide();
      return;
    }

    $("#violations-table").show();
    $("#filters").show();

    var tablebody = $("#violations-table > tbody");
    tablebody.empty();

    violationSubset.forEach(function(violation) {

      var tr = $("<tr></tr>");
      var tdImpact = $("<td><span class='" + violation["impact"] + "'>" + violation["impact"] + "</span></td>");
      var tdRuleset = $("<td><span class='ruleset'>" + rulesetTagLabels[violation["applicableRulesetTag"]] + "</span></td>");
      var tdLocation = $("<td><em>\"" + violation["fileTitle"] + "\"</em><br/><br/><code class='location'>" + violation["location"] + "</code></td>");
      if (violation.html) {
        var tdSnippet = $('<br/><br/><div class=\'snippet\'>Snippet: <code>'+ violation.html.trim() + "</code></div>");
        tdLocation.append(tdSnippet);
      }
      var tdRule = $("<td>" + violation["rule"] + "<br/><br/><span class='engine'>" + violation["engine"] + "</span></td>");

      var desc = violation["desc"];

      var detailsArr = desc.split("\n");
      var tdDetails = $("<td class='details'></td>");

      var ul = $("<ul></ul>");
      tdDetails.append(ul);
      detailsArr.forEach(function(item) {
        if (item != "") {
          var elm = $("<li></li>");
          elm.text(decodeEntities(item));
          ul.append(elm);
        }
      });
      var link = $("<p><a href='"
        + violation["kburl"]
        + '\' target=\'_blank\'>Learn more about: ' + violation["kbtitle"] + "</a></p>");
      tdDetails.append(link);

      tr.append(tdImpact);
      tr.append(tdRuleset);
      tr.append(tdRule);
      tr.append(tdLocation);
      tr.append(tdDetails);
      tablebody.append(tr);
    });

    $('#violations-table').DataTable(dataTableInit);
  }

  function filterSelected() {
    var filters = [];
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        if (optElm.selected) {
          filters[elm.name] = optElm.value;
        }
      });
    });
    var filteredData = filterViolations(filters);
    updateTableContents(filteredData, true);
  }

  // expects:
  // {"rule": "all", "impact": "serious", "file": "p1.xhtml"}
  function filterViolations(filters) {
    var filteredList = [];
    violations.forEach(function(item) {
      if (
        (filters["rule"] == "all" || item["rule"] === filters["rule"])
        &&
        (filters["impact"] == "all" || item["impact"] === filters["impact"])
        &&
        (filters["file"] == "all" || item["file"] === filters["file"])
        &&
        (filters["ruleset"] == "all" || item["applicableRulesetTag"] === filters["ruleset"])
      )
      {
        filteredList.push(item);
      }
    });
    return filteredList;
  }

  function resetFilters() {
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        optElm.selected = optElm.value == "all";
      });
    });
    filterSelected();
  }

  function decodeEntities(text) {
    // The entities tend to appear in violation descriptions, and there are just a few named ones involved
    var namedEntities = {
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": "\"",
      "&nbsp": " "
    };
    // process entities
    var str = text.replace(/&#(\d+);/g, function(match, dec) {
      return String.fromCharCode(dec);
		});

    //process named entities
    Object.keys(namedEntities).forEach(k => {
      str = str.replace(new RegExp(k, 'g'), namedEntities[k]);
    });
    return str;
  }

  // certain classes need to be added to elements if we're using javascript in the browser
  function prepareForJS() {
    $('#filters').removeClass('d-none');
    $('#navlist').addClass('nav-tabs nav');
    $('#violations').addClass('tab-pane active');
    $('#metadata').addClass('tab-pane');
    $('#outlines').addClass('tab-pane');
    $('#images').addClass('tab-pane');
  }
  $(document).ready(function() {
    prepareForJS();
    $('#metadata-table').DataTable(dataTableInit);
    //updateTableContents(violations, false);
    $('#violations-table').DataTable(dataTableInit);
    $('#filters > select').change(filterSelected);
  });

  </script>


</body>
</html>
